{% extends "base.html" %}
{% block head %}
    {{ super() }}
{% endblock %}
{% block title %}
    Submit an event suggestion -
{% endblock %}
{% block body %}
    {{ super() }}
    <div class="col-md-12">
    <form action="/submitevent" method=post>
    {% if event is not none %}
        <input type=hidden name=eventid value="{{ event.id }}">
    {% endif %}
    <div class="row well section where">
        <div class="col-md-2">
            <h6 class="row">
                WHERE
            </h6>
        </div>
        <div class="col-md-4">
            <div id="typechange" class="control-group">
                <input type="hidden" name="eventtype" value="noroomtype">
                <label class="radio" for="talkbtn">
                    <input type="radio" data-toggle="radio" name=eventtype
                           value="talk" id="talkbtn" {{ event.eventType | is_checked('talk') }}>An audience sits and
                    watches one or more speakers.
                </label>
                <label class="radio" for="workshopbtn">
                    <input type="radio" data-toggle="radio" name=eventtype
                           value="workshop" id="workshopbtn" {{ event.eventType | is_checked('workshop') }}>Hands-on
                    participatory activity.
                </label>
                <label class="radio" for="bofbtn">
                    <input type="radio" data-toggle="radio" name=eventtype class="typelist where question roomtab"
                           value="bof" id="bofbtn" {{ event.eventType | is_checked('bof') }}>Open discussion with no
                    presenter or organizer.
                </label>
                <label class="radio" for="gamebtn">
                    <input type="radio" data-toggle="radio" name=eventtype
                           value="game" id="gamebtn" {{ event.eventType | is_checked('game') }}>Tabletop game.
                </label>
                <label class="radio" for="onstagebtn">
                    <input type="radio" data-toggle="radio" name=eventtype
                           value="onstage" id="onstagebtn" {{ event.eventType | is_checked('onstage') }}>Concert, skit,
                    movie, or other onstage performance.
                </label>
                <label class="radio" for="rovingbtn">
                    <input type="radio" data-toggle="radio" name=eventtype
                           value="roving" id="rovingbtn" {{ event.eventType | is_checked('roving') }}>Activity located
                    throughout the hotel or elsewhere.
                </label>
            </div>

        </div>
        <div class="col-md-6">
            <div class="control-group" id="resources" style="display:none">
                {% for resource in resources %}
                    <label for="resource_{{ resource.id }}" class="checkbox">
                        <input type="checkbox" name="resource_{{ resource.id }}" id="resource_{{ resource.id }}"
                               value="{{ resource.id }}">
                        {{ resource.name }}
                    </label>
                {% endfor %}
            </div>
            <div class="question" id="players" style="display:none">
                <label for="players">
                    Number of Players

                    <select tabindex="" name="players" data-size="false" data-width="100%">
                        <option value="2 {{ event.players|is_selected(2) }}">2</option>
                        <option value="3" {{ event.players|is_selected(3) }}>3</option>
                        <option value="5" {{ event.players|is_selected(4) }}>4</option>
                        <option value="5" {{ event.players|is_selected(5) }}>5</option>
                        <option value="6" {{ event.players|is_selected(6) }}>more</option>
                    </select>
                </label>
            </div>
            <div class="question" id="furniture" style="display:none">
                <label for="roundtables">
                    Round tables

                    <select tabindex="" name=roundtables data-size="false" data-width="100%">
                        <option value="0" {{ event.roundTables|is_selected(0) }}>0</option>
                        <option value="1" {{ event.roundTables|is_selected(1) }}>1</option>
                        <option value="2" {{ event.roundTables|is_selected(2) }}>2</option>
                        <option value="3" {{ event.roundTables|is_selected(3) }}>3</option>
                        <option value="5" {{ event.roundTables|is_selected(5) }}>more</option>
                    </select>
                </label>

                <label for="longtables">
                    Long tables

                    <select tabindex="" name=longtables data-size="false" data-width="100%">
                        <option value="0" {{ event.longTables|is_selected(0) }}>0</option>
                        <option value="1" {{ event.longTables|is_selected(1) }}>1</option>
                        <option value="2" {{ event.longTables|is_selected(2) }}>2</option>
                        <option value="3" {{ event.longTables|is_selected(3) }}>3</option>
                        <option value="5" {{ event.longTables|is_selected(5) }}>more</option>
                    </select>
                </label>
            </div>
            <div class="question" id="otherfacility" style="display:none">
                <label for="facilityrequest">Additional Requests</label>
                <textarea name=facilityrequest id="facilityrequest" rows="2" cols="50"
                          placeholder="Other room and furniture setup requests go here. If you selected 'More', we'll work out the specifics with you later."
                          class="form-control">{{ event.facilityRequest | default('',true) }}</textarea> <br/>
            </div>
        </div>

    </div>
    <div class="row well section when">
        <div class="col-md-2">
            <h6 class="row">
                WHEN
            </h6>
        </div>
        <div class="col-md-10">
            <div class="col-md-2 question">
                <div class="row btngroup timechange" data-toggle="buttons" id="duration">
                    <label class="radio timechange" for="1">
                        <input type="radio" class="timechange" data-toggle="radio" name="timechange" value="1"
                               id="duration_50_mins" {{ event.duration | is_checked(1) }}>50 mins
                    </label>
                    <label class="radio timechange" for="2">
                        <input type="radio" class="timechange" data-toggle="radio" name="timechange" value="2"
                               id="duration_1_hr_50_mins" {{ event.duration | is_checked(2) }}>1 hr 50 mins
                    </label>
                    <label class="radio timechange" for="3">
                        <input type="radio" class="timechange" data-toggle="radio" name="timechange" value="3"
                               id="duration_2_hr_50_mins" {{ event.duration | is_checked(3) }}>2 hr 50 mins
                    </label>
                    <label class="radio timechange" for="4">
                        <input type="radio" class="timechange" data-toggle="radio" name="timechange" value="4"
                               id="duration_more" {{ event.duration | is_checked(4) }}>more
                    </label>
                    <label class="radio timechange" for="5">
                        <input type="radio" class="timechange" data-toggle="radio" name="timechange" value="5"
                               id="duration_all_weekend" {{ event.duration | is_checked(5) }}>all weekend
                    </label>
                </div>
            </div>
            <div class="col-md-10 form-group">
                <div class="row hidden" id="setupandrepeat">
                    <div class="col-md-6">
                        <label for="setuptime">Setup time
                            <select tabindex="2" name=setuptime" data-size="false" data-width="100%">
                                <option value="0" {{ event.setupTime | is_selected(0) }}>No</option>
                                <option value="1" {{ event.setupTime | is_selected(1) }}>1 hour</option>
                                <option value="2" {{ event.setupTime | is_selected(2) }}>2 hours</option>
                                <option value="3" {{ event.setupTime | is_selected(3) }}>more</option>
                            </select>
                        </label>

                    </div>
                    <div class="col-md-6">

                        <label for="repetition">Repeat
                            <select tabindex="2" name=repetition data-size="false" data-width="100%">
                                <option value="0" {{ event.repetition | is_selected(0) }}>No</option>
                                <option value="1" {{ event.repetition | is_selected(1) }}>twice</option>
                                <option value="2" {{ event.repetition | is_selected(2) }}>thrice</option>
                                <option value="3" {{ event.repetition | is_selected(3) }}>more</option>
                            </select>
                        </label>
                    </div>
                </div>
                <div class="row hidden" id="othertime" style="margin-top:15px;">
                    <textarea name=timerequest id="timerequest" rows="2" cols="50"
                              placeholder="Other time requests go here. If you selected 'More', we'll work out the specifics with you later."
                              class="form-control">{{ event.timeRequest | default('',true) }}</textarea>
                </div>
            </div>
        </div>
    </div>
    <div class="row well who">
        <div class="col-md-2">
            <h6 class="row">
                WHO
            </h6>
        </div>
        <div class="col-md-10">
            <div class="row control-group">
                <p>
                    <small>Suggested by
                        {% if event is none %}
                            <input type=hidden name=submitter_id value={{ user.id }}/>{{ macros.user_link(user) }}
                        {% else %}
                            <input type=hidden name=submitter_id value={{ event.submitter.id }}/>
                            {{ macros.user_link(event.submitter) }}
                        {% endif %}

                        {% if event is not none %}
                            {% for user_presenter in event.userPresenters %}
                                {{ macros.user_link(user_presenter) }}
                            {% endfor %}
                            {% for person_presenter in event.personPresenters %}
                                {{ macros.person_link(person_presenter) }}
                            {% endfor %}
                        {% endif %}
                    </small>
                </p>
                <label for="person0">
                    <span id="pptype" style="display:none"></span>
                    <span id="pluralpptype" style="display:none"></span>
                    <input name=person0 data-display-title="additional presenter field" type=text size="24"
                           maxlength="24" class="pp form-control"/>
                </label>
                <button id="newperson" class="pp btn btn-sm"><span class="fui-plus"></span> someone else</button>
            </div>
        </div>
    </div>
    <div class="row well what">
        <div class="col-md-2">
            <h6 class="row">
                WHAT
            </h6>
        </div>
        <div class="col-md-10">
            <div class="row">
                <div class="col-md-12">
                    <div class="row">
                        <div class="col-md-8">
                            <p class="help-block">
                                <small>The following information will appear to attendees on the website and in the
                                    schedule
                                    book. <em>Please do not leave comments here for the convention committee.</em>
                                </small>
                            </p>
                        </div>
                    </div>
                    <div class="row">
                        <div class="question col-md-5">
                            <div class="control-group">
                                <label>
                                    Title:
                                    <textarea id="title" class="form-control" name="title"
                                              rows="2" cols="40"
                                              maxlength="80">{{ event.title | default('',true) }}</textarea>
                                </label>
                            </div>
                        </div>
                        <div class="question col-md-7">
                            <div class="control-group">
                                <label>
                                    Descriptive blurb:
                                    <textarea name=description id="blurb" rows="8" cols="60"
                                              class="form-control"
                                              maxlength="700">{{ event.description | default('',true) }}</textarea>
                                </label>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
            <div class="row" style="margin-top:25px">
                <div class="col-md-6">
                    <p>Select all topics that apply</p>

                    <div class="control-group" id="topics" data-toggle="buttons">
                        {% for tag in tags %}
                            <label value="{{ tag }}" {{ event | checked_if_tagged(tag) }} class="btn btn-xs btn-inverse"
                                   id="{{ tag }}tagbtn">
                                <input type="checkbox" name="tag_{{ tag }}" class="button-checkbox">
                                {{ tag }}
                            </label>
                        {% endfor %}
                    </div>
                    <!-- <form action="/createtag" method=post > -->
                    <div>
                        <label for="tagname">New topic tag:
                            <input type=text name=tagname id="tagname"
                                   class="form-control input-sm" maxlength="24"/>
                        </label>
                        <button type=submit value="Submit tag" class="btn btn-default btn-sm" name=createtag
                                id="createtag"><span class="fui-plus"></span> Submit Tag
                        </button>
                        <!--
                                                    TODO: MAKE AJAX CALL
                       -->
                    </div>
                    <!-- </form> -->
                </div>
                <div class="col-md-6">
                    <p>
                        Choose the staff person you would like to route this submission to
                    </p>

                    <div class="control-group" data-toggle="buttons" id="tracks">
                        {% for track in tracks %}
                            <label class="btn btn-xs btn-info" id="track_{{ track }}">
                                <input type="radio" name=track value="{{ track }}"
                                       id="tbn_{{ track }}" {{ event | checked_if_tracked(track) }}>
                                {{ track }}
                            </label>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row well submit">
        <div class="col-md-2">
            <h6 class="row">
                WHY NOT
            </h6>
        </div>
        <div class="col-md-10">
            <div class="row">
                <input type=submit value="{% if event is not none %}Update event{% else %}Submit event{% endif %}"
                       class="btn btn-default btn-primary" name=submitevent id="submitevent"/>
                <input type=text style="display: none" name=comments id="comments"
                       {% if event is not none %}value="{{ event.comments }}"{% endif %}/>
                {% if user is not none and user.staff == 1 %}
                    {% if event is not none %}
                        <div class="question">
                            <span style="color:#7f8c8d;">Submission status:</span>
                            <select value="" tabindex="2" name=followupstate class="select-block">
                                <option value="0" {{ event.followUpState | is_selected(0) }}>Suggested</option>
                                <option value="1" {{ event.followUpState | is_selected(1) }}>Followed up</option>
                                <option value="2" {{ event.followUpState | is_selected(2) }}>Accepted</option>
                                <option value="3" {{ event.followUpState | is_selected(3) }}>Rejected</option>
                            </select>
                        </div>
                        {% if event.followUpState == 2 %}
                            <div class="question">
                                <span style="color:#7f8c8d;">Create an event from this submission:</span>
                                <input type=submit value="create" class="buttons" name=submitevent id="createevent"/>
                            </div>
                        {% endif %}
                    {% endif %}

                {% endif %}
            </div>
        </div>

    </div>
    </form>
    </div>
{% endblock %}
{% block page_script %}
    <script src="{{ url_for('static', filename='submissionform.js') }}"></script>
{% endblock %}
